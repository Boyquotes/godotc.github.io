# 第三课 高质量与高性能编程

这是我参与「第五届青训营 」笔记创作活动的第3天

## 1. 高质量代码

### 1.1 什么是高质量?
> 编写的代码需要达到正确可靠、简洁清晰
- 边界条件考虑 (分支判断, 健壮性)
- 异常情况处理（tolerance, fallback）
- 易读易维护 (注释)

### 1.2 错误处理
-  `panic()`
	 - 不建议在业务代码中使用`panic`而是`fallback`(可以处理)
	 - 在初始化中会造成不可预知的错误时，使用 panic
- `recover()`	
	- 只能在被defer的函数中使用
 
## 2. 性能优化的建议

> 在保证程序的正确性、稳定性与完备性等情况下
- 使用容器时可以先分配一下大小，减少扩容的性能损耗
- 字符串拼接
	- `strings.Builder`
	 - `+`
  - 空结构体
	  - `struct{}` 不占用内存(`set`只需要 key 不需要 value)
   - 保证一个变量的多线程并发情况使用 `atomic` 而不是锁

   ## 3. 优化工具
> 要依靠数据不是猜测
>要定位最大瓶颈而不是细枝末节
>不要过早优化不要过度优化

### pprof
